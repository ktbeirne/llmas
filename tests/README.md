# テスト基盤

このディレクトリには、LLMDesktopMascotアプリケーションの包括的なテスト基盤が含まれています。

## ディレクトリ構造

```
tests/
├── unit/          # 単体テスト - 個別の関数、クラス、コンポーネントのテスト
├── integration/   # 統合テスト - 複数のコンポーネント間の相互作用をテスト
├── e2e/          # エンドツーエンドテスト - アプリケーション全体の動作をテスト
├── helpers/      # テストヘルパー関数とユーティリティ
└── mocks/        # モック定義とスタブ
```

## テストの種類

### 単体テスト (Unit Tests)
- 個別の関数やクラスメソッドを分離してテスト
- 依存関係はモックで代替
- 高速で信頼性の高いテスト

### 統合テスト (Integration Tests)
- 複数のコンポーネント間の相互作用をテスト
- IPC通信、サービス連携、データフローをテスト
- 実際の依存関係を使用

### E2Eテスト (End-to-End Tests)
- アプリケーション全体の動作をテスト
- ユーザーシナリオに基づく実際の操作をシミュレート
- Playwrightを使用

## 実行方法

```bash
# 全テストの実行
npm run test

# 単体テストのみ
npm run test:unit

# 統合テストのみ
npm run test:integration

# E2Eテストのみ
npm run test:e2e

# カバレッジ付きテスト実行
npm run test:coverage
```

## テスト書き方ガイドライン

### TDD (Test-Driven Development) の実践
1. 失敗するテストを先に書く (Red)
2. テストを通すための最小限のコードを書く (Green)
3. リファクタリングでコードを改善 (Refactor)

### モック使用原則
- 外部依存（API、ファイルシステム、ネットワーク）は必ずモック
- Electronの機能（ipcMain, BrowserWindow等）はモックで代替
- テストごとにモックをリセット

### テスト命名規則
- `describe`: テスト対象のクラスや機能名
- `it`: 具体的な動作と期待結果を記述
- 日本語記述推奨（describe、itの説明文）

### カバレッジ目標
- 単体テスト: 90%以上
- 統合テスト: 70%以上
- 重要なビジネスロジック: 100%

## Electronアプリ特有の考慮事項

### プロセス分離
- メインプロセスとレンダラープロセスを適切に分けてテスト
- IPC通信のモックと実際の通信をテスト

### ネイティブAPI
- ファイルシステム、OS機能は適切にモック
- ウィンドウ管理、ダイアログ表示をテスト

### アクセシビリティ
- 画面表示、操作性のテストを含める
- マルチプラットフォーム対応を考慮