# 実装チェックリスト

**目的**: 実装品質・保守性確保のための確認事項  
**対象フェーズ**: 実装・開発段階  
**📅 参照時期**: 実装開始時、コード作成中、コミット前、PR作成前

---

## 🔨 実装前確認

### TDD実践確認
- [ ] **Red Phase**: 失敗するテストを先に作成したか？
- [ ] **テスト実行**: 作成したテストが期待通り失敗することを確認したか？
- [ ] **テスト妥当性**: テストが要件を正しく表現しているか？
- [ ] **境界条件**: エッジケースのテストも作成したか？

### アーキテクチャ遵守確認
- [ ] **FSD層配置**: 適切な層（Feature/Widget/Shared/Entities）に配置しているか？
- [ ] **Public API**: 他層からのアクセスは index.ts 経由のみか？
- [ ] **Feature独立性**: 他Featureの内部に直接依存していないか？
- [ ] **依存方向**: 上位層→下位層の依存方向を守っているか？

---

## ⌨️ コーディング中確認

### コード品質基準
- [ ] **単一責任**: 1つのクラス・関数が1つの責任のみを持つか？
- [ ] **型安全性**: any型を使用していないか？（unavoidable場合は // @ts-ignore with 理由）
- [ ] **命名規則**: 意図が明確で一貫した命名か？
- [ ] **関数サイズ**: 1関数20行以内、複雑度を最小化しているか？
- [ ] **マジックナンバー**: 定数定義で意味を明確化しているか？

### 依存関係管理
- [ ] **シングルトン回避**: グローバルインスタンスを使用していないか？
- [ ] **グローバル変数禁止**: 状態をグローバルスコープに置いていないか？
- [ ] **依存注入**: 外部依存は引数・props・コンストラクタで受け取るか？
- [ ] **Interface利用**: 具象クラスではなくインターフェースに依存しているか？
- [ ] **循環依存回避**: A→B→Aの循環参照がないか？

### Electron固有実装
- [ ] **プロセス境界**: Main/Renderer間の責任分離を適切に行ったか？
- [ ] **IPC効率**: 必要最小限の通信にとどめているか？
- [ ] **セキュリティ**: nodeIntegration等のセキュリティ設定を適切に設定したか？
- [ ] **メモリ管理**: プロセス間でのメモリリークを防いでいるか？

### Three.js/VRM実装
- [ ] **リソース管理**: テクスチャ・ジオメトリの適切な破棄を実装したか？
- [ ] **フレームレート**: 60fps維持可能な実装か？
- [ ] **WebGLコンテキスト**: コンテキストロスト時の復旧処理を実装したか？
- [ ] **メモリ制限**: VRMモデルサイズによるメモリ制限を考慮したか？

---

## 🛡️ エラーハンドリング実装

### エラー処理実装
- [ ] **早期失敗**: 問題を早期に発見・報告する実装か？
- [ ] **具体的エラー**: 「何が」「なぜ」失敗したかわかるエラーメッセージか？
- [ ] **エラー境界**: try-catchで適切な範囲を囲んでいるか？
- [ ] **回復処理**: 可能な場合は代替手段・リトライ処理を実装したか？
- [ ] **ログ出力**: デバッグに必要な情報をlogger.tsで記録しているか？

### 非同期処理実装
- [ ] **Race condition回避**: 競合状態を適切に制御しているか？
- [ ] **プロミス処理**: async/awaitでエラーハンドリングを適切に行ったか？
- [ ] **キャンセレーション**: 長時間処理の中断機能を実装したか？
- [ ] **リソース保証**: finally句でリソースクリーンアップを行ったか？

---

## 🧪 テスト実装確認

### TDD Green Phase
- [ ] **最小実装**: テストを通すための最小限のコードのみ実装したか？
- [ ] **テスト実行**: 全てのテストが通ることを確認したか？
- [ ] **既存テスト**: 既存のテストが壊れていないか確認したか？
- [ ] **カバレッジ**: 新規実装部分のテストカバレッジは適切か？

### テスト品質確認
- [ ] **モック設計**: 外部依存を適切にモック化したか？
- [ ] **テストデータ**: テスト用データが本番データに依存していないか？
- [ ] **決定論的**: 同じ入力で常に同じ結果を返すか？
- [ ] **独立性**: テスト間の依存関係がないか？

---

## 🚀 パフォーマンス実装

### 実装最適化
- [ ] **レンダリング最適化**: 不要な再描画・再計算を避けているか？
- [ ] **メモ化実装**: 重い計算処理にメモ化を適用したか？
- [ ] **バンドル最適化**: 不要なライブラリimportを避けているか？
- [ ] **レイジーロード**: 必要な場合にレイジーロードを実装したか？

### リソース管理実装
- [ ] **メモリリーク防止**: イベントリスナー・タイマーの適切な解除を実装したか？
- [ ] **キャッシュ戦略**: 適切なキャッシュ戦略を実装したか？
- [ ] **ガベージコレクション**: 大きなオブジェクトの参照を適切に解除したか？

---

## 🔍 静的解析クリア

### Lint確認
- [ ] **ESLint実行**: `npm run lint` でエラー・警告がないか？
- [ ] **TypeScript実行**: `npm run typecheck` でエラーがないか？（該当する場合）
- [ ] **FSD専用ルール**: アーキテクチャ違反の警告がないか？
- [ ] **カスタムルール**: プロジェクト固有のルール違反がないか？

### Code Quality
- [ ] **複雑度チェック**: 循環的複雑度が適切な範囲内か？
- [ ] **重複コード**: 同様の処理が複数箇所にないか？
- [ ] **未使用コード**: 未使用のimport・変数・関数がないか？
- [ ] **型安全性**: strict modeでの型チェックをクリアしているか？

---

## 🔄 リファクタリング実装

### TDD Refactor Phase
- [ ] **コード品質改善**: 重複除去・構造改善を行ったか？
- [ ] **テスト保持**: リファクタリング後もすべてのテストが通るか？
- [ ] **パフォーマンス**: リファクタリングでパフォーマンスが悪化していないか？
- [ ] **可読性向上**: コードがより理解しやすくなったか？

---

## ✅ コミット前最終確認

### 完了基準チェック
- [ ] **機能要件**: 実装が要件を満たしているか？
- [ ] **非機能要件**: パフォーマンス・セキュリティ要件を満たしているか？
- [ ] **ドキュメント更新**: API変更時は関連ドキュメントを更新したか？
- [ ] **統合テスト**: 他機能との統合動作確認を行ったか？

### 品質ゲート
- [ ] **すべてのテスト通過**: 単体・統合・E2Eテストが全て通るか？
- [ ] **Lintエラーゼロ**: ESLint・TypeScriptエラーが全てクリアか？
- [ ] **パフォーマンス基準**: 起動時間・メモリ使用量が基準内か？
- [ ] **コードレビュー準備**: PR説明・レビュー観点が明確か？

---

## 🎯 実装完了基準

以下がすべて満たされた場合、実装フェーズを完了とする：

- [ ] すべてのチェック項目をクリア
- [ ] TDD（Red-Green-Refactor）サイクル完了
- [ ] 静的解析エラー・警告ゼロ
- [ ] 機能動作確認完了
- [ ] ドキュメント・コメント更新完了

---

**📝 Note**: 実装中に判断に迷った場合は、[ドキュメントインデックス](../README.md)で関連ガイドを確認してください。